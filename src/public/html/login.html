<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTML Login Form</title>
  <link rel="stylesheet" href="/css/login.css">
</head>

<body>
  <div class="main">
    <h1>PDF Configurator</h1>
    <h3>Enter your login credentials</h3>
    <form action="/api/login">
      <input type="text" id="email" name="email" placeholder="Email" required>

      <input type="password" id="password" name="password" placeholder="Password" required>

      <div class="wrap">
        <button type="submit">
          Login
        </button>
      </div>
    </form>
    <a href="/html/register.html" style="text-decoration: none;">
      Create an account
    </a>
  </div>
  <div id="alert">Alert</div>
</body>
<script>
  function toggleAlert(message, color) {
    let alert = document.getElementById("alert");
    alert.classList.add("active");
    setTimeout(() => {
      alert.classList.remove("active");
    }, 4000);
    alert.style.backgroundColor = color;
    alert.innerText = message;
  }

  window.onload = (() => {
    let email = localStorage.getItem('email');
    let firstName = localStorage.getItem('firstName');
    let lastName = localStorage.getItem('lastName');

    if (email != null && firstName != null && lastName != null) {
      window.location = '/main';
      return;
    }

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    if (urlParams.get('errCode') === '401') {
      toggleAlert('Email or password is incorrect');
    } else if (urlParams.get('errCode') === '402') {
      toggleAlert('Password is incorrect');
    } else if (urlParams.get('errCode')) {
      toggleAlert('Internal error');
    }
  });
</script>

</html>